<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>GG | Genuine Gamers</title>
    <link rel="icon" type="image/x-icon" href="/img/logo.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style-log.css">
   <script type="text/javascript">
        var comUser=false;
        var comPwd=false;
        var comCpwd=false;
        var comTlf=false;
        var comMail=false;
        var comDate=false;
        var comSex=false;
      function valuser(){
        var user=document.getElementById('user').value;
        var userER=/^([a-zA-Z]|[0-9]){6,50}/;
        if(userER.test(user)){
        document.getElementById('user').style.color="white";
        comUser=true;
        }
        else{
        document.getElementById('user').style.color="red";
        }
      }
      function valpwd(){
        var pwd=document.getElementById('pwd').value;
        var pwdER=/^^(?=.*\d)(?=.*[\u0021-\u002b\u003c-\u0040])(?=.*[A-Z])(?=.*[a-z])\S{6,14}$/;
        if(pwdER.test(pwd)){
        document.getElementById('pwd').style.color="white";
        comPwd=true;
        }
        else{
        document.getElementById('pwd').style.color="red";
        }
      }
      function valcpwd(){
        var cpwd=document.getElementById('cpwd').value;
        var cpwdER=/^^(?=.*\d)(?=.*[\u0021-\u002b\u003c-\u0040])(?=.*[A-Z])(?=.*[a-z])\S{6,14}$/;
        if(cpwdER.test(cpwd)){
        document.getElementById('cpwd').style.color="white";
        comCpwd=true;
        valpwds();
        }
        else{
        document.getElementById('cpwd').style.color="red";
        }
      }
      function valpwds(){
        var pwd=document.getElementById('pwd').value;
        var cpwd=document.getElementById('cpwd').value;
        if(pwd==cpwd){
          comPwd=true;
          comCpwd=true;
        console.log('todo flama');
        }
        else{
        alert('No coinciden las dos contraseñas. Asegurese de que es una contraseña que podrá recordar');
        }
      }
      function pwdError(){
        if ((comPwd==true)&&(comCpwd==true)) {
          console.log("tamos bien");
        }
        else{
          console.log("No se lo pongamos tan facil a los malos")
        }
      }
      function valtlf(){
        var tlf=document.getElementById('tlf').value;
        var tlfER=/^([0-9]){9}/;
        if(tlfER.test(tlf)){
        document.getElementById('tlf').style.color="white";
        comTlf=true;
        }
        else{
        document.getElementById('tlf').style.color="red";
        }
      }
      function valdate(){
        var hoy = new Date();
        var date = document.getElementById('date').value;
        var dhoy = hoy.getDate();
        var mhoy = hoy.getMonth();
        var ahoy = hoy.getFullYear()-3;
        var hoy = ahoy +"-"+mhoy+"-"+dhoy;
        console.log(date);
        console.log(hoy);
        if (hoy>date) {
          console.log("OK");
          comDate=true;
        }
        else{
          console.log("Fatal error");
        }
      }

      function valmail(){
        var mail=document.getElementById('mail').value;
        var mailER=/^\w+([\.\-]?\w{0,})*@\w+(\.\w{2,4})+$/;
        if(mailER.test(mail)){
        document.getElementById('mail').style.color="white";
        comMail=true;
        }
        else{
        document.getElementById('mail').style.color="red";
        }
      }
      function valsex(){
        var sex= document.querySelectorAll('input[name="sex"]');
        if (sex[0].checked == false && sex[1].checked==false) {
            return alert("Completa el campo sexo.");
        }
        else{
          comSex=true;
        }
      }
      function valf(){
        if((comUser==true)&&(comPwd==true)&&(comCpwd==true)&&(comTlf==true)&&(comMail==true)&&(comDate==true)){
        document.registroform.submit();
        }
        else{
        return false;
        }
      }
    </script>
  </head>
  <body>
    <div class="registro-box">
      <img src="../img/logo-f.png" class="logo">
      <h1>Registrese Aquí</h1>
      <form method="post" name="registroform" th:action="@{/auth/register}" th:object="${user}">
        <label for="user">Usuario</label>
         <input type="text" th:field="*{username}" placeholder="Introduzca Usuario" id="user" onkeyup="valuser()" required minlength="6" maxlength="50" value="Antonio">
        <label for="pwd">Contraseña</label>
          <input type="password" th:field="*{pwd}" placeholder="Introduzca Contraseña" onkeyup="valpwd()" id="pwd" required minlength="6" maxlength="14" value="Antonio#123">
        <label for="cpwd">Vuelva a introducir la contraseña</label>
          <input type="password" placeholder="Introduzca Contraseña" onchange="valcpwd()" onblur="pwdError()" id="cpwd" required minlength="6" maxlength="14" value="Antonio#123">
        <label for="tlf">Teléfono</label>
          <input type="text" th:field="*{tlf}" placeholder="Introduzca Teléfono" onkeyup="valtlf()" id="tlf" required minlength="9" maxlength="9" value="666666666">
        <label for="mail">E-mail</label>
          <input type="text" th:field="*{mail}" placeholder="Introduzca E-mail" onkeyup="valmail()" id="mail" required minlength="3" maxlength="50" value="pepe@gmail.es">
        <label for="fnac">Fecha de Nacimiento</label>
          <input type="date" th:field="*{fnac}" placeholder="Introduzca su Fecha de Nacimiento" onblur="valdate()" id="date" required value="1999-12-04">
        <label for="sex">Sexo</label>
        <br>
        <!--
          <div class="check">Hombre<input type="radio" value="h" name="sex" value="h" onchange="valsex()" required></div>
          <div class="check">Mujer&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" value="f" name="sex" onchange="valsex()" required></div>
         -->
        <button id="submit" value="Registrate" onclick="valf()">Registrate</button>
        <a th:href="@{/auth/login}">Volver al Login</a>
      </form>
    </div>
  </body>
</html>